---
layout: my-post
title:  "API : Fetch"
date:   2021-12-01
categories: ecoucou cours api
---

Mise en oeuvre d'une API ...

<div id= "sketch-API"> </div>

<script>
    var urlBase = 'https://cors-rky.herokuapp.com/https://oianalytics-100.optimistik.fr/api/oianalytics/time-values/query?data-reference=';
//    var urlBaseOld = 'https://oianalytics-100.optimistik.fr/api/optimistik/data/time_values?data-reference=';
    var urlTime = '';
    var interval = 'PT1M'  // PnYnMnD  TnHnMnS
    var urlRes = '&aggregation-period='+interval;
    var url = '';
    let end = new Date(Date.now());
  now.setMinutes(now.getMinutes()-11);
    urlTime = '&from='+encodeURIComponent(now.toISOString())+'&to='+encodeURIComponent(end.toISOString());
    url = urlBase+encodeURIComponent('E-T15099')+urlTime+'&aggregation-period=PT1M';
    getDashData(url,'coucou','#info');
    var opt = fetch(urldata, {method: 'GET',headers: new Headers({'Access-Control-Allow-Origin':'*','Accept':'application/json',
        'mode':'no-cors','credentials':'includes','Authorization':'basic '+code})}).then(response => {
        return response.json();
        })

  getData();

  async function getData() {
    await fetch()
  }

</script>
{% highlight javascript %}

{% endhighlight %}


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script>
<script type="text/javascript" src="/developpement/js/fourier3/fourier.js"></script>
<script type="text/javascript" src="/developpement/js/fourier3/sketch.js"></script>